function ajax(a){function c(){var u,w;if(r){if(typeof r==="string"){r=r.split("&");for(var v=0,t=r.length;v<t;v++){u=r[v].split("=")[0];w=r[v].split("=")[1];r[v]=encodeURIComponent(u)+"="+encodeURIComponent(w)}r=r.replace("/%20/g","+")}else{if(typeof r==="object"){var s=[];for(var u in r){var w=r[u].toString();u=encodeURIComponent(u);w=encodeURIComponent(w);s.push(u+"="+w)}r=s.join("&").replace("/%20/g","+")}}if(b==="get"||l==="jsonp"){e+=e.indexOf("?")>-1?r:"?"+r}}}function i(){var s=document.createElement("script"),t=new Date().getTime()+Math.round(Math.random()*1000),u="JSONP_"+t;window[u]=function(v){clearTimeout(d);document.body.removeChild(s);g(v)};s.src=e+(e.indexOf("?")>-1?"":"?")+"callback="+u;s.type="text/javascript";document.body.appendChild(s);k(u,s)}function k(t,s){if(m!==undefined){d=setTimeout(function(){if(l==="jsonp"){delete window[t];document.body.removeChild(s)}else{q=true;h&&h.abort()}console.log("timeout")},m)}}function p(){function s(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{var t=["Microsoft","msxm3","msxml2","msxml1"];for(var v=0;v<t.length;v++){try{var u=t[v]+".XMLHTTP";return new ActiveXObject(u)}catch(w){}}}}h=s();h.open(b,e,f);if(b==="post"&&!o){h.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8")}else{if(o){h.setRequestHeader("Content-Type",o)}}h.onreadystatechange=function(){if(h.readyState===4){if(m!==undefined){if(q){return}clearTimeout(d)}if((h.status>=200&&h.status<300)||h.status==304){g(h.responseText)}else{n(h.status,h.statusText)}}};h.send(b==="get"?null:r);k()}var e=a.url||"",b=(a.type||"get").toLowerCase(),r=a.data||null,o=a.contentType||"",l=a.dataType||"",f=a.async===undefined&&true,m=a.timeOut,j=a.before||function(){},n=a.error||function(){},g=a.success||function(){};var q=false,d=null,h=null;c();j();if(l==="jsonp"){i()}else{p()}};